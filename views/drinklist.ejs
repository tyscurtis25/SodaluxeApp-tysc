<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drink List</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Quicksand&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container col-9">
            <a class="navbar-brand pt-0" href="\drinklist">Sodaluxe</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="\drinklist">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="\addDrink">Add Drink</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container col-9">
        <div class="container col-4 text-center">
            <div class="row pb-3">
                <div class="col-9">
                    <h1 class="pt-2">Soda<span class="luxe">luxe</span></h1>
                </div>
                <div class="col-3">
                    <svg width="77px" height="77px" viewBox="0 0 64 64" data-name="Layer 1" id="Layer_1" 
                        xmlns="http://www.w3.org/2000/svg"><defs>
                        <style>.cls-1{fill:#6d4d42;}.cls-2{fill:#378e43;}.cls-3{fill:#42a047;}.cls-4{fill:#D98E04;}.cls-5{fill:#D97904;}.cls-6{fill:#ffe0b2;}.cls-7{fill:#fcb64d;}.cls-8{fill:#fecc81;}.cls-9{fill:#faa629;}</style>
                        </defs><path class="cls-1" d="M22,21a1,1,0,0,1-1-1,9.01,9.01,0,0,1,9-9,1,1,0,0,1,0,2,7.0081,7.0081,0,0,0-7,7A1,1,0,0,1,22,21Z"/>
                        <path class="cls-2" d="M22,18.06V20H20.06A6.056,6.056,0,0,1,14,13.94V12h1.94A6.056,6.056,0,0,1,22,18.06Z"/>
                        <path class="cls-3" d="M22,20H20.06A6.056,6.056,0,0,1,14,13.94V12Z"/>
                        <path class="cls-4" d="M32.94,48.68A19.3038,19.3038,0,0,1,22,52C12.06,52,4,44.84,4,36s8.06-16,18-16c9.56,0,17.36,6.63,17.94,15H26A16.9519,16.9519,0,0,0,32.94,48.68Z"/>
                        <path class="cls-5" d="M32.94,48.68A19.3038,19.3038,0,0,1,22,52V20c9.56,0,17.36,6.63,17.94,15H26A16.9519,16.9519,0,0,0,32.94,48.68Z"/>
                        <path class="cls-4" d="M60,35a17,17,0,0,1-34,0Z"/><path class="cls-5" d="M60,35A16.9985,16.9985,0,0,1,43,52V35Z"/>
                        <path class="cls-6" d="M56,35a13,13,0,1,1-26,0Z"/><path class="cls-7" d="M56,35A12.9985,12.9985,0,0,1,43,48V35Z"/>
                        <path class="cls-8" d="M48.81,46.63a13.0047,13.0047,0,0,1-11.62,0L43,35Z"/><path class="cls-9" d="M48.81,46.63A12.8816,12.8816,0,0,1,43,48V35Z"/>
                    </svg>
                </div>
            </div>
        </div>

        <h3>Drink List</h3>
        <% {console.log("listing drinks: " + drinkList.length);} %>
        <table class="table table-hover table-sm table-borderless">
            <thead>
                <tr>
                    <th>
                        <!-- Add a form and button to go to add a drink route -->
                        <form method="GET" action="\addDrink">
                            <input type="submit" value="Add Drink" class="btn menu-btn">
                        </form>
                    </th>
                    <th>Name</th>
                    <th>Ingredients</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
                <!-- EJS loop tp create a table row for each drink -->
                <% for(var i=0;i<drinkList.length;i++) { %>
                    <tr>
                        <td>
                            <!-- Add a form and button on each row to edit the drink -->
                            <form action="/updDrink/<%= drinkList[i].id %>"
                                method="get" id="udpDrink" name="updDrink">
                                <input type="submit" name="Edit" value="Edit" class="btn menu-btn">
                            </form>
                        </td>
                        <td class="pt-2"><%= drinkList[i].drinkName %></td>
                        <td class="pt-2"><%= drinkList[i].drinkIngred %></td>
                        <td class="pt-2"><%= drinkList[i].drinkPrice %></td>
                        <td>
                            <!-- Add a form and button on each row to bring up the safe delete process -->
                            <form action="/delDrink/<%= drinkList[i].id %>"
                                method="post" id="delDrink<%=drinkList[i].id%>"
                                name="delDrink<%=drinkList[i].id%>">
                                <input type="button" name="Delete" class="btn menu-btn float-end"
                                    value="Delete" onclick="safeDelete('delDrink<%=drinkList[i].id%>')">
                            </form>
                        </td>
                    </tr>
                <%}%>
            </tbody>
        </table>
    </div>

    <footer class="footer text-right">
        <div class="container col-9">
            <p>&copy;2023 sodaluxe.com</p>
        </div>
    </footer>

    <script src="/js/bootstrap.bundle.min.js"></script>
    <script>
        /*** Ask Mercy Ouestion before deleting a drink ***/
        function safeDelete(deleteDrink) {
            console.log("passed to safeDelete: " + deleteDrink);
            let yesNo = confirm("Are you sure?");
            if (yesNo === true) {
                console.log("submitting delete; " + deleteDrink);
                document.forms[deleteDrink].submit();
            }
        }
    </script>
</body>
</html>
